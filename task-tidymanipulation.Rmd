# Tidy manipulations and grouping operations

## Getting the data

Get the `SAFI_clean.csv` dataset, which you can read about and **download** from here: https://figshare.com/articles/SAFI_Survey_Results/6262019.

We will use the "tidyverse" of packages for this:

```{r}    
## load the tidyverse
library(tidyverse)

interviews <- read_csv("SAFI_clean.csv", na = "NULL")

## inspect the data
interviews

## preview the data
# View(interviews)
```

## Creating new variables
```{r}
interviews$numberPPR <- as.numeric(interviews$no_membrs / interviews$rooms)
```

Compute a median of the number of people per room, for each village.
```{r}
library(dplyr)
interviews %>%
  group_by(village) %>%
  summarise_at(vars(numberPPR), funs(mean(., na.rm=TRUE)))
```

Extra: Produce a boxplot of the number of people per room, by village.
```{r}
library(ggplot2)
ggplot(data = interviews, mapping = aes(y = numberPPR, x= village)) + 
  geom_boxplot()
```